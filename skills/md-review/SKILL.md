---
name: md-review
description: MDファイルのベストプラクティス準拠チェックとリライト
category: documentation
triggers:
  - "md-review"
  - "MDレビュー"
  - "MDを確認"
  - "MDチェック"
  - "ドキュメントレビュー"
tools:
  - Read
  - Write
  - Edit
  - Grep
  - Glob
---

# /md-review - MDファイル品質チェック

**説明**: プロジェクト内のMDファイルをベストプラクティスに照合し、改善提案またはリライトを行う。

## 使用方法

```
/md-review <ファイルパス>
/md-review <ファイルパス> --fix    # 自動リライト
/md-review --all                  # 全MDファイルをスキャン
```

## 概要

MDファイルの種類（rule / skill / agent / command）を自動判定し、該当テンプレートと照合してギャップ分析を実行する。公式ベストプラクティスに基づくチェックリストで品質を評価し、具体的な改善提案を出力する。

## 起動タイミング

- 新しいMDファイルを作成した後の品質確認
- 既存MDファイルの定期的なメンテナンス
- PR前のドキュメント品質ゲート

## 前提条件

- `skills/md-review/templates/` にテンプレートが存在すること
- 対象ファイルがプロジェクト内のMDファイルであること

## ワークフローステップ

### ステップ1: ファイル種類の判定

対象ファイルのパスから種類を判定する:

| パスパターン | 種類 | テンプレート |
|-------------|------|-------------|
| `.claude/rules/*.md` | rule | `templates/rule.md` |
| `skills/*/SKILL.md` | skill | `templates/skill.md` |
| `agents/**/*.md` | agent | `templates/agent.md` |
| `commands/*.md` | command | `templates/command.md` |

上記に該当しない場合はユーザーに種類を確認する。

### ステップ2: テンプレート照合

該当テンプレートを読み込み、対象ファイルとのギャップを分析する:
- 必須セクションの有無
- フロントマターの形式と必須フィールド
- セクション順序の妥当性

### ステップ3: チェックリスト実行

以下の観点で評価する:

**構造チェック**:
- [ ] フロントマターの形式が種類に合っているか
- [ ] 必須セクションが揃っているか
- [ ] 500行以下か

**簡潔さチェック**:
- [ ] 「削除してもClaudeがミスしない行」がないか
- [ ] 自明なルール（「バグを書くな」等）が含まれていないか
- [ ] 同じ内容の重複がないか

**具体性チェック**:
- [ ] 指示が具体的で行動可能か（「きれいに」のような曖昧表現がないか）
- [ ] 必要な場合に例示があるか

**整合性チェック**:
- [ ] プロジェクトの既存パターン（日本語、技術用語は英語）に合っているか
- [ ] 他ファイルとの重複がないか（対象ファイルのキーフレーズでGrepし、プロジェクト横断で検索）

### ステップ4: 総合評価の判定

| 評価 | 基準 |
|------|------|
| **A** | 必須セクション全て揃い、改善提案がLowのみ or なし |
| **B** | 必須セクション揃っているが、Medium指摘が1件以上 |
| **C** | 必須セクション欠落、またはHigh/Medium指摘が複数 |

### ステップ5: レポート出力

```markdown
# MDレビュー結果: <ファイル名>

**種類**: rule / skill / agent / command
**行数**: N行
**総合評価**: A / B / C

## 必須セクション
- [x] セクション名 ... OK
- [ ] セクション名 ... 欠落

## 改善提案
1. **[重要度]** 具体的な改善内容
2. ...

## リライト案（--fix 指定時）
（改善後の全文）
```

## 使用例

### 例1: 単一ファイルのレビュー

```
/md-review .claude/rules/typescript.md
```

→ rule テンプレートと照合し、ギャップと改善提案を出力。

### 例2: 自動リライト

```
/md-review agents/development/planner.md --fix
```

→ agent テンプレートに準拠したリライト案を生成し、確認後に適用。

### 例3: 全ファイルスキャン

```
/md-review --all
```

→ プロジェクト内の全MDファイルをスキャンし、改善が必要なファイルをリスト。

## ベストプラクティス

1. 新規MDファイル作成後は必ずレビューを実行する
2. `--fix` の結果は差分を確認してから適用する
3. 指摘が多い場合はテンプレートから新規作成し直すことを検討する
4. チーム全体のMD品質を揃えるため、PR前にレビューを習慣化する

## 関連エージェント

- **doc-updater**: ドキュメント更新エージェント（`agents/development/doc-updater.md`）

## モデル選択

- **Sonnet**: 通常のレビュー（コスト効率重視）
- **Opus**: 大規模リライトや複雑な構造改善

## 注意事項

- テンプレートはあくまでガイドライン。プロジェクト固有の事情で逸脱が必要な場合はその旨を明記する
- `CLAUDE.md` や `MEMORY.md` など特殊なファイルはレビュー対象外
