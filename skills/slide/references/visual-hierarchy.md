# ビジュアル階層リファレンス

このドキュメントは、Marp形式のプレゼンテーションスライドにおける**ビジュアル階層とデザインガイドライン**を定義します。すべてのスライドは、このガイドラインに準拠することで、一貫性のあるプロフェッショナルなデザインを実現できます。

> **重要**: このドキュメントは `style-guide.md` および `layout-patterns.md` と連携して使用してください。

## 目次

1. [フォントサイズ階層](#フォントサイズ階層)
2. [タイポグラフィシステム（Tailwind）](#タイポグラフィシステムtailwind)
3. [カラースキーム](#カラースキーム)
4. [スペーシング](#スペーシング)
5. [⚠️ コンテンツ量の制限](#コンテンツ量の制限)
6. [コントラストとアクセシビリティ](#コントラストとアクセシビリティ)
7. [レイアウトパターン](#レイアウトパターン)
8. [タイポグラフィ](#タイポグラフィ)
9. [ベストプラクティス](#ベストプラクティス)

---

## フォントサイズ階層

情報の重要度を視覚的に表現するため、明確なフォントサイズの階層を定義します。

### サイズ表

| 要素 | サイズ | 用途 | 重要度 |
|------|--------|------|--------|
| **h1** | 48px | スライドタイトル、セクション見出し | ⭐⭐⭐⭐ |
| **h2** | 36px | サブセクション見出し | ⭐⭐⭐ |
| **h3** | 28px | 小見出し、強調テキスト | ⭐⭐ |
| **body (p, li)** | 24px | 本文、リスト項目 | ⭐ |
| **code (inline)** | 22px | インラインコード | - |
| **pre code** | 20px | コードブロック | - |
| **caption, small** | 18px | 注釈、補足情報 | - |

### 使用例

```markdown
# これはh1です（48px） - スライドの主要タイトル

## これはh2です（36px） - セクションの見出し

### これはh3です（28px） - 小見出し

これは本文です（24px）。リストも同じサイズです。

- リスト項目1（24px）
- リスト項目2（24px）

インラインの`code`は22pxです。

コードブロックは20pxです：
\`\`\`
function example() {
  return "20px";
}
\`\`\`
```

### 階層ルール

1. **h1は1スライドに1つ**: スライドのメインタイトルとして使用
2. **h2は複数可**: サブセクションの見出しとして使用
3. **h3は控えめに**: 強調が必要な場合のみ使用
4. **本文は一貫して24px**: 読みやすさを重視

### スケーリング比率

フォントサイズは、以下の比率に基づいています：

```
h1 (48px) = body × 2.0
h2 (36px) = body × 1.5
h3 (28px) = body × 1.17
body (24px) = 基準
```

---

## タイポグラフィシステム（Tailwind）

Tailwind CSSを使用する場合の統一されたフォントサイズクラスです。

| クラス | 用途 | サイズ目安 |
|--------|------|-----------|
| `text-em-3xl` | 数値強調、インパクトキーワード | 48-56px |
| `text-em-2xl` | パネル見出し、セクションタイトル | 36-40px |
| `text-em-xl` | サブ見出し | 28-32px |
| `text-em-lg` | 本文、リスト項目 | 22-24px |
| `text-em-base` | 補足説明、キャプション | 18-20px |

### 使用例

```html
<!-- 数値強調 -->
<p class="text-em-3xl font-bold text-gray-600">35万文字</p>

<!-- パネル見出し -->
<h1 class="text-em-2xl font-bold mb-4 text-gray-800">セクション名</h1>

<!-- 本文 -->
<ul class="text-em-lg space-y-3 text-gray-700">
  <li>項目1</li>
</ul>
```

---

## カラースキーム

### ⚠️ 重要な変更点

**グレースケール基調 + 限定的なアクセントカラー**を使用します。派手な色は禁止です。

### メインカラー（Tailwindグレースケール）

| Tailwindクラス | カラーコード | 用途 |
|---------------|-------------|------|
| `bg-gray-50` | `#f9fafb` | パネル背景（明） |
| `bg-gray-100` | `#f3f4f6` | パネル背景（中） |
| `text-gray-600` | `#4b5563` | 補助テキスト |
| `text-gray-700` | `#374151` | サブ見出し |
| `text-gray-800` | `#1f2937` | メインテキスト、主要見出し |

### アクセントカラー（限定使用）

| 色名 | カラーコード | 用途 |
|------|-------------|------|
| **ネイビー** | `#1B4565` | プライマリアクセント、セクション背景 |
| **ティール** | `#3E9BA4` | セカンダリアクセント、グラデーション |

```
⚠️ 重要: 1スライドにつきアクセントカラーは1-2色まで
```

### グラデーション

```css
/* セクション背景用 */
background: linear-gradient(to right, #1B4565, #3E9BA4);

/* パネル強調用（斜め） */
background: linear-gradient(135deg, #1B4565 0%, #3E9BA4 100%);
```

### 使用禁止カラー

以下のカラーは**使用禁止**です：

| 禁止カラー | 理由 |
|-----------|------|
| `red-600` / `#dc2626` | 派手すぎる |
| `green-600` / `#16a34a` | 派手すぎる |
| `blue-600` / `#2563eb` | アクセントカラーと競合 |
| `yellow-500` / `#eab308` | 視認性が低い |

### カラー適用例（新方式）

```css
/* Tailwindクラスを優先使用 */
h1, h2 {
  /* text-gray-800 */
  color: #1f2937;
}

h3 {
  /* text-gray-700 */
  color: #374151;
}

p, li {
  /* text-gray-700 */
  color: #374151;
}

/* パネル背景 */
.panel {
  /* bg-gray-50 */
  background-color: #f9fafb;
}

/* コードブロック */
pre {
  background-color: #1f2937;  /* gray-800 */
  color: #ffffff;
}
```

### 旧カラー（非推奨）

以下は旧方式のカラーです。新規スライドでは上記の新方式を使用してください。

| 色名 | カラーコード | 用途 |
|------|-------------|------|
| ~~Dark Gray~~ | `#1a202c` | → `text-gray-800`を使用 |
| ~~Medium Gray~~ | `#2d3748` | → `text-gray-700`を使用 |
| ~~Light Gray~~ | `#4a5568` | → `text-gray-600`を使用 |

---

## スペーシング

適切なスペーシングは、情報の整理と視覚的な快適さを提供します。

### マージン

| 要素 | マージン | 説明 |
|------|---------|------|
| **h1** | `margin-bottom: 24px` | タイトルと本文の間 |
| **h2** | `margin-bottom: 20px` | サブタイトルと本文の間 |
| **h3** | `margin-bottom: 16px` | 小見出しと本文の間 |
| **p** | `margin-bottom: 16px` | 段落間 |
| **li** | `margin-bottom: 12px` | リスト項目間 |
| **ul, ol** | `margin-left: 32px` | リストのインデント |

### パディング

| 要素 | パディング | 説明 |
|------|----------|------|
| **section** | `padding: 60px` | スライド全体のパディング |
| **code** | `padding: 2px 6px` | インラインコード |
| **pre** | `padding: 16px` | コードブロック |
| **blockquote** | `padding-left: 16px` | 引用 |

### 行間（Line Height）

| 要素 | 行間 | 説明 |
|------|------|------|
| **h1, h2, h3** | `1.2` | 見出しは狭め |
| **p, li** | `1.6` | 本文は読みやすく |
| **pre code** | `1.5` | コードは適度に |

### スペーシング適用例

```css
section {
  padding: 60px;
}

h1 {
  margin-bottom: 24px;
  line-height: 1.2;
}

h2 {
  margin-bottom: 20px;
  line-height: 1.2;
}

h3 {
  margin-bottom: 16px;
  line-height: 1.2;
}

p, li {
  line-height: 1.6;
  margin-bottom: 16px;
}

li {
  margin-bottom: 12px;
}

ul, ol {
  margin-left: 32px;
}
```

---

## コンテンツ量の制限

⚠️ **スライドからコンテンツがはみ出すことは絶対に許容されません。**

Marpのデフォルト設定（padding: 60px、body: 24px、line-height: 1.6）を考慮した、1スライドあたりのコンテンツ上限を定義します。

### コードブロックの制限（最重要）

| パターン | コード行数上限 | テキスト上限 |
|---------|--------------|-------------|
| コードのみ | **8行** | なし |
| コード + 説明 | **6行** | 2-3行 |
| コード + タイトル + ポイント | **6行** | ポイント2項目まで |

### テキストのみの制限

| コンテンツタイプ | 上限 |
|----------------|------|
| 箇条書き（1階層） | **6項目** |
| 箇条書き（2階層） | **4項目**（サブ項目含む） |
| 段落 | **2-3段落** |
| テーブル | **5行 × 4列** |

### 分割ルール

9行以上のコードは、必ず複数スライドに分割します。

**分割の指針**:
1. **論理単位で分割**: インポート、定義、使用に分ける
2. **関数単位で分割**: 1関数 = 1スライド
3. **ステップ単位で分割**: 設定、実装、実行に分ける

**命名規則**:
- 「実装の詳細（1/3）」「実装の詳細（2/3）」「実装の詳細（3/3）」
- 「ステップ1: 設定」「ステップ2: 実装」「ステップ3: 実行」

### 分割例

❌ **悪い例**: 1スライドに15行のコード + 説明
```markdown
# 実装例

```typescript
// 15行のコード...
```

**ポイント**:
- 項目1
- 項目2
- 項目3
```

✅ **良い例**: 3スライドに分割
```markdown
# 実装例（1/3）: 型定義

```typescript
// 5行のコード（型定義部分）
```

---

# 実装例（2/3）: メイン関数

```typescript
// 6行のコード（メイン関数）
```

---

# 実装例（3/3）: 使用例

```typescript
// 4行のコード（使用例）
```

**ポイント**:
- 項目1
- 項目2
```

### チェックリスト

スライド生成後、以下を必ず確認してください：

- [ ] すべてのコードブロックが8行以内である
- [ ] コード + テキストの場合、コードは6行以内である
- [ ] 箇条書きは6項目以内である
- [ ] 長いコードは論理単位で分割されている
- [ ] 分割されたスライドには連番が付いている

---

## コントラストとアクセシビリティ

読みやすさとアクセシビリティを確保するため、適切なコントラストを維持します。

### コントラスト比

WCAG 2.1のAAレベル（4.5:1以上）を推奨します。

| 組み合わせ | コントラスト比 | 評価 |
|-----------|--------------|------|
| `#1a202c` on `#ffffff` | 15.3:1 | ✅ AAA |
| `#2d3748` on `#ffffff` | 12.6:1 | ✅ AAA |
| `#4a5568` on `#ffffff` | 8.3:1 | ✅ AAA |
| `#2b6cb0` on `#ffffff` | 5.9:1 | ✅ AA |
| `#e2e8f0` on `#2d3748` | 12.0:1 | ✅ AAA |

### アクセシビリティのベストプラクティス

1. **十分なコントラスト**: テキストと背景のコントラスト比を4.5:1以上に保つ
2. **大きなフォントサイズ**: 最小24pxで本文を記述
3. **明確な階層**: フォントサイズとカラーで情報の重要度を表現
4. **絵文字の補足**: 絵文字だけでなく、テキストでも情報を伝える

---

## レイアウトパターン

> **詳細は `layout-patterns.md` を参照してください。**
> 40種類のパターンが7カテゴリに分類されています。

### パターンカテゴリ一覧

| カテゴリ | パターン数 | 主な用途 |
|---------|-----------|---------|
| A. タイトル/セクション | 5種 | 開始、終了、目次 |
| B. カラムレイアウト | 8種 | 比較、グリッド |
| C. 縦リスト | 4種 | ステップ、タイムライン |
| D. パネルデザイン | 5種 | 情報ボックス |
| E. 背景/画像 | 4種 | ビジュアル |
| F. 強調/特殊 | 3種 | 統計、キーメッセージ |
| G. 応用パターン | 10種 | 事例、CTA |

### 基本パターン（クイックリファレンス）

#### タイトルスライド

```markdown
<!--
_backgroundImage: "linear-gradient(to right, #1B4565, #3E9BA4)"
_color: #fff
-->

# プレゼンテーションタイトル

**発表者名**
日付
```

#### 2カラム比較（Tailwind）

```html
<div class="grid grid-cols-2 gap-6 mt-6">
  <div class="bg-gray-50 rounded-xl shadow-lg p-6 border-l-4 border-gray-400">
    <h1 class="text-em-2xl font-bold mb-4 text-gray-800">Before</h1>
    <ul class="text-em-lg space-y-3 text-gray-700">
      <li>項目1</li>
    </ul>
  </div>
  <div class="bg-gray-100 rounded-xl shadow-lg p-6 border-l-4" style="border-color:#3E9BA4;">
    <h1 class="text-em-2xl font-bold mb-4 text-gray-800">After</h1>
    <ul class="text-em-lg space-y-3 text-gray-700">
      <li>項目1</li>
    </ul>
  </div>
</div>
```

#### 統計表示

```html
<div class="grid grid-cols-3 gap-4 mt-6">
  <div class="bg-gray-100 rounded-lg shadow p-4 text-center">
    <p class="text-em-3xl font-bold text-gray-600">50%</p>
    <p class="text-em-lg mt-2 text-gray-700">効率向上</p>
  </div>
</div>
```

### 旧パターン（非推奨）

以下は旧方式のパターンです。新規スライドでは `layout-patterns.md` のパターンを使用してください。

<details>
<summary>旧パターンを表示</summary>

#### 1. タイトルスライド（旧）

```markdown
<!-- _class: lead -->

# メインタイトル

## サブタイトル

**発表者名**
日付
```

#### 2. 2カラムレイアウト（旧）

```markdown
<div style="display: flex; gap: 40px;">
<div style="flex: 1;">

## 左側
- 項目1

</div>
<div style="flex: 1;">

## 右側
- 項目2

</div>
</div>
```

</details>

---

## タイポグラフィ

### フォントファミリー

```css
font-family: 'Hiragino Sans', 'Noto Sans JP', sans-serif;
```

**推奨フォント**:
- **日本語**: Hiragino Sans、Noto Sans JP
- **欧文**: システムフォント（-apple-system、Segoe UI、Roboto）
- **コード**: Courier New、Monaco、Consolas

### フォントウェイト

| 要素 | ウェイト | 説明 |
|------|---------|------|
| **h1, h2** | `bold` (700) | 見出しは太く |
| **h3** | `normal` (400) | 小見出しは標準 |
| **strong** | `bold` (700) | 強調は太く |
| **body** | `normal` (400) | 本文は標準 |

---

## ベストプラクティス

### 1. 一貫性を保つ

すべてのスライドで同じフォントサイズ、カラー、スペーシングを使用します。

✅ **Good**:
```markdown
# タイトル (48px, #1a202c)
## サブタイトル (36px, #2d3748)
```

❌ **Bad**:
```markdown
# タイトル (50px, #000000)  # サイズと色が異なる
## サブタイトル (32px, #333333)  # サイズと色が異なる
```

### 2. 階層を明確に

フォントサイズとカラーで情報の重要度を明確に示します。

✅ **Good**:
```markdown
# 最も重要 (h1)
## 次に重要 (h2)
### やや重要 (h3)
本文 (p)
```

❌ **Bad**:
```markdown
### タイトル (h3を使用)  # h1を使うべき
# 本文 (h1を使用)  # pを使うべき
```

### 3. 詰め込みすぎない

1スライドに多くの情報を詰め込まないようにします。

✅ **Good**:
- 1スライド = 1メッセージ
- 適切なスペーシング
- 読みやすい分量

❌ **Bad**:
- 1スライドに複数のトピック
- スペーシングが不足
- テキストが多すぎる

### 4. コントラストを確保

テキストと背景のコントラストを十分に確保します。

✅ **Good**:
- 白背景に濃いグレーのテキスト
- コントラスト比 4.5:1以上

❌ **Bad**:
- 白背景に薄いグレーのテキスト
- コントラスト比が低い

### 4.1. コードブロックの配色 ⭐ 重要

ダークな背景（#2d3748）のコードブロックでは、**白を基調とした明るい色**を使用します。

✅ **Good** - はっきり見える配色:
```css
pre {
  background-color: #2d3748;  /* ダークグレー背景 */
  color: #ffffff;  /* 白色テキスト - 最もはっきり見える */
}

pre code {
  color: #ffffff;  /* 白色 - コードブロック内も白 */
}

strong {
  color: #fbbf24;  /* 明るい黄色 - はっきり見える */
}

em {
  color: #a78bfa;  /* 明るい紫 - はっきり見える */
}
```

❌ **Bad** - 見づらい配色:
```css
pre {
  background-color: #2d3748;  /* ダークグレー背景 */
  color: #e2e8f0;  /* 薄いグレー - 見づらい */
}

strong {
  color: #2b6cb0;  /* 暗い青 - 背景に溶け込んで見えない */
}

em {
  color: #805ad5;  /* 暗い紫 - 背景に溶け込んで見えない */
}
```

**ポイント**:
- ダーク背景には白（#ffffff）を基調とする
- 強調色は明るく鮮やかな色を使う（Amber #fbbf24、Light Purple #a78bfa）
- 暗い青や紫は避ける（背景に溶け込んで見えない）

### 5. 絵文字を適度に使用

絵文字は視覚的な魅力を高めますが、使いすぎないようにします。

✅ **Good**:
```markdown
# TypeScript入門 📚
```

❌ **Bad**:
```markdown
# TypeScript入門 📚✨🎓💻🚀
```

---

## チェックリスト

スライドを生成した後、以下をチェックしてください：

- [ ] フォントサイズが階層に従っている（h1:48px, h2:36px, h3:28px, body:24px）
- [ ] カラースキームが統一されている（プライマリ、セカンダリ、アクセント）
- [ ] スペーシングが適切である（マージン、パディング）
- [ ] コントラスト比が十分である（4.5:1以上）
- [ ] レイアウトが一貫している
- [ ] 1スライド1メッセージの原則を守っている
- [ ] テキストが詰め込みすぎていない

---

## 参考資料

- [WCAG 2.1ガイドライン](https://www.w3.org/WAI/WCAG21/quickref/)
- [Material Design Typography](https://material.io/design/typography)
- [Apple Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines/)
- [Contrast Checker](https://webaim.org/resources/contrastchecker/)

---

**注意**: このガイドラインは、プロフェッショナルで読みやすいスライドを作成するための推奨事項です。プロジェクトの要件に応じて、適宜カスタマイズしてください。
