# ビジュアル階層リファレンス

このドキュメントは、Marp形式のプレゼンテーションスライドにおける**ビジュアル階層とデザインガイドライン**を定義します。すべてのスライドは、このガイドラインに準拠することで、一貫性のあるプロフェッショナルなデザインを実現できます。

## 目次

1. [フォントサイズ階層](#フォントサイズ階層)
2. [カラースキーム](#カラースキーム)
3. [スペーシング](#スペーシング)
4. [⚠️ コンテンツ量の制限](#コンテンツ量の制限)
5. [コントラストとアクセシビリティ](#コントラストとアクセシビリティ)
6. [レイアウトパターン](#レイアウトパターン)
7. [タイポグラフィ](#タイポグラフィ)
8. [ベストプラクティス](#ベストプラクティス)

---

## フォントサイズ階層

情報の重要度を視覚的に表現するため、明確なフォントサイズの階層を定義します。

### サイズ表

| 要素 | サイズ | 用途 | 重要度 |
|------|--------|------|--------|
| **h1** | 48px | スライドタイトル、セクション見出し | ⭐⭐⭐⭐ |
| **h2** | 36px | サブセクション見出し | ⭐⭐⭐ |
| **h3** | 28px | 小見出し、強調テキスト | ⭐⭐ |
| **body (p, li)** | 24px | 本文、リスト項目 | ⭐ |
| **code (inline)** | 22px | インラインコード | - |
| **pre code** | 20px | コードブロック | - |
| **caption, small** | 18px | 注釈、補足情報 | - |

### 使用例

```markdown
# これはh1です（48px） - スライドの主要タイトル

## これはh2です（36px） - セクションの見出し

### これはh3です（28px） - 小見出し

これは本文です（24px）。リストも同じサイズです。

- リスト項目1（24px）
- リスト項目2（24px）

インラインの`code`は22pxです。

コードブロックは20pxです：
\`\`\`
function example() {
  return "20px";
}
\`\`\`
```

### 階層ルール

1. **h1は1スライドに1つ**: スライドのメインタイトルとして使用
2. **h2は複数可**: サブセクションの見出しとして使用
3. **h3は控えめに**: 強調が必要な場合のみ使用
4. **本文は一貫して24px**: 読みやすさを重視

### スケーリング比率

フォントサイズは、以下の比率に基づいています：

```
h1 (48px) = body × 2.0
h2 (36px) = body × 1.5
h3 (28px) = body × 1.17
body (24px) = 基準
```

---

## カラースキーム

一貫性のあるカラースキームを使用することで、プロフェッショナルな印象を与えます。

### メインカラー

#### プライマリカラー（見出し）

| 色名 | カラーコード | 用途 | 例 |
|------|-------------|------|-----|
| **Dark Gray** | `#1a202c` | h1、最も重要な見出し | ![#1a202c](https://via.placeholder.com/15/1a202c/1a202c.png) |
| **Medium Gray** | `#2d3748` | h2、本文 | ![#2d3748](https://via.placeholder.com/15/2d3748/2d3748.png) |
| **Light Gray** | `#4a5568` | h3、補足情報 | ![#4a5568](https://via.placeholder.com/15/4a5568/4a5568.png) |

#### セカンダリカラー（強調）

| 色名 | カラーコード | 用途 | 例 |
|------|-------------|------|-----|
| **Amber** | `#fbbf24` | コード内の強調（strong） | ![#fbbf24](https://via.placeholder.com/15/fbbf24/fbbf24.png) |
| **Light Purple** | `#a78bfa` | 斜体（em）、特殊な強調 | ![#a78bfa](https://via.placeholder.com/15/a78bfa/a78bfa.png) |
| **Teal** | `#319795` | 成功、完了 | ![#319795](https://via.placeholder.com/15/319795/319795.png) |

#### アクセントカラー（状態表示）

| 色名 | カラーコード | 用途 | 例 |
|------|-------------|------|-----|
| **Green** | `#22c55e` | 成功、正解 | ![#22c55e](https://via.placeholder.com/15/22c55e/22c55e.png) |
| **Orange** | `#f59e0b` | 警告、注意 | ![#f59e0b](https://via.placeholder.com/15/f59e0b/f59e0b.png) |
| **Red** | `#ef4444` | エラー、問題 | ![#ef4444](https://via.placeholder.com/15/ef4444/ef4444.png) |
| **Blue** | `#3b82f6` | 情報、ヒント | ![#3b82f6](https://via.placeholder.com/15/3b82f6/3b82f6.png) |

#### 背景カラー

| 色名 | カラーコード | 用途 | 例 |
|------|-------------|------|-----|
| **White** | `#ffffff` | メイン背景 | ![#ffffff](https://via.placeholder.com/15/ffffff/ffffff.png) |
| **Light Gray** | `#f7fafc` | インラインコード背景 | ![#f7fafc](https://via.placeholder.com/15/f7fafc/f7fafc.png) |
| **Dark Gray** | `#2d3748` | コードブロック背景 | ![#2d3748](https://via.placeholder.com/15/2d3748/2d3748.png) |

### カラー適用例

```css
h1 {
  color: #1a202c;  /* Dark Gray */
}

h2 {
  color: #2d3748;  /* Medium Gray */
}

h3 {
  color: #4a5568;  /* Light Gray */
}

p, li {
  color: #2d3748;  /* Medium Gray */
}

strong {
  color: #fbbf24;  /* Amber - はっきり見える色 */
}

em {
  color: #a78bfa;  /* Light Purple - はっきり見える色 */
}

code {
  background-color: #f7fafc;  /* Light Gray */
}

pre {
  background-color: #2d3748;  /* Dark Gray */
  color: #ffffff;  /* White - 最もはっきり見える */
}

pre code {
  color: #ffffff;  /* White - コードブロック内も白 */
}
```

---

## スペーシング

適切なスペーシングは、情報の整理と視覚的な快適さを提供します。

### マージン

| 要素 | マージン | 説明 |
|------|---------|------|
| **h1** | `margin-bottom: 24px` | タイトルと本文の間 |
| **h2** | `margin-bottom: 20px` | サブタイトルと本文の間 |
| **h3** | `margin-bottom: 16px` | 小見出しと本文の間 |
| **p** | `margin-bottom: 16px` | 段落間 |
| **li** | `margin-bottom: 12px` | リスト項目間 |
| **ul, ol** | `margin-left: 32px` | リストのインデント |

### パディング

| 要素 | パディング | 説明 |
|------|----------|------|
| **section** | `padding: 60px` | スライド全体のパディング |
| **code** | `padding: 2px 6px` | インラインコード |
| **pre** | `padding: 16px` | コードブロック |
| **blockquote** | `padding-left: 16px` | 引用 |

### 行間（Line Height）

| 要素 | 行間 | 説明 |
|------|------|------|
| **h1, h2, h3** | `1.2` | 見出しは狭め |
| **p, li** | `1.6` | 本文は読みやすく |
| **pre code** | `1.5` | コードは適度に |

### スペーシング適用例

```css
section {
  padding: 60px;
}

h1 {
  margin-bottom: 24px;
  line-height: 1.2;
}

h2 {
  margin-bottom: 20px;
  line-height: 1.2;
}

h3 {
  margin-bottom: 16px;
  line-height: 1.2;
}

p, li {
  line-height: 1.6;
  margin-bottom: 16px;
}

li {
  margin-bottom: 12px;
}

ul, ol {
  margin-left: 32px;
}
```

---

## コンテンツ量の制限

⚠️ **スライドからコンテンツがはみ出すことは絶対に許容されません。**

Marpのデフォルト設定（padding: 60px、body: 24px、line-height: 1.6）を考慮した、1スライドあたりのコンテンツ上限を定義します。

### コードブロックの制限（最重要）

| パターン | コード行数上限 | テキスト上限 |
|---------|--------------|-------------|
| コードのみ | **8行** | なし |
| コード + 説明 | **6行** | 2-3行 |
| コード + タイトル + ポイント | **6行** | ポイント2項目まで |

### テキストのみの制限

| コンテンツタイプ | 上限 |
|----------------|------|
| 箇条書き（1階層） | **6項目** |
| 箇条書き（2階層） | **4項目**（サブ項目含む） |
| 段落 | **2-3段落** |
| テーブル | **5行 × 4列** |

### 分割ルール

9行以上のコードは、必ず複数スライドに分割します。

**分割の指針**:
1. **論理単位で分割**: インポート、定義、使用に分ける
2. **関数単位で分割**: 1関数 = 1スライド
3. **ステップ単位で分割**: 設定、実装、実行に分ける

**命名規則**:
- 「実装の詳細（1/3）」「実装の詳細（2/3）」「実装の詳細（3/3）」
- 「ステップ1: 設定」「ステップ2: 実装」「ステップ3: 実行」

### 分割例

❌ **悪い例**: 1スライドに15行のコード + 説明
```markdown
# 実装例

```typescript
// 15行のコード...
```

**ポイント**:
- 項目1
- 項目2
- 項目3
```

✅ **良い例**: 3スライドに分割
```markdown
# 実装例（1/3）: 型定義

```typescript
// 5行のコード（型定義部分）
```

---

# 実装例（2/3）: メイン関数

```typescript
// 6行のコード（メイン関数）
```

---

# 実装例（3/3）: 使用例

```typescript
// 4行のコード（使用例）
```

**ポイント**:
- 項目1
- 項目2
```

### チェックリスト

スライド生成後、以下を必ず確認してください：

- [ ] すべてのコードブロックが8行以内である
- [ ] コード + テキストの場合、コードは6行以内である
- [ ] 箇条書きは6項目以内である
- [ ] 長いコードは論理単位で分割されている
- [ ] 分割されたスライドには連番が付いている

---

## コントラストとアクセシビリティ

読みやすさとアクセシビリティを確保するため、適切なコントラストを維持します。

### コントラスト比

WCAG 2.1のAAレベル（4.5:1以上）を推奨します。

| 組み合わせ | コントラスト比 | 評価 |
|-----------|--------------|------|
| `#1a202c` on `#ffffff` | 15.3:1 | ✅ AAA |
| `#2d3748` on `#ffffff` | 12.6:1 | ✅ AAA |
| `#4a5568` on `#ffffff` | 8.3:1 | ✅ AAA |
| `#2b6cb0` on `#ffffff` | 5.9:1 | ✅ AA |
| `#e2e8f0` on `#2d3748` | 12.0:1 | ✅ AAA |

### アクセシビリティのベストプラクティス

1. **十分なコントラスト**: テキストと背景のコントラスト比を4.5:1以上に保つ
2. **大きなフォントサイズ**: 最小24pxで本文を記述
3. **明確な階層**: フォントサイズとカラーで情報の重要度を表現
4. **絵文字の補足**: 絵文字だけでなく、テキストでも情報を伝える

---

## レイアウトパターン

一貫性のあるレイアウトパターンを使用します。

### 1. タイトルスライド（Lead）

```markdown
<!-- _class: lead -->

# メインタイトル

## サブタイトル

**発表者名**
日付
```

**特徴**:
- 中央揃え
- 大きなフォントサイズ
- シンプルで印象的

### 2. セクション区切りスライド

```markdown
<!-- _class: lead -->

# セクションタイトル
```

**特徴**:
- 中央揃え
- h1のみ使用
- 次のセクションへの移行を明確に

### 3. コンテンツスライド（標準）

```markdown
# スライドタイトル

## サブセクション

本文やリストなど

- 項目1
- 項目2
```

**特徴**:
- 左揃え
- h1はスライドタイトル
- h2以下でコンテンツを整理

### 4. 2カラムレイアウト

```markdown
# タイトル

<div style="display: flex; gap: 40px;">
<div style="flex: 1;">

## 左側
- 項目1
- 項目2

</div>
<div style="flex: 1;">

## 右側
- 項目3
- 項目4

</div>
</div>
```

**特徴**:
- 比較やコントラストを示す
- Before/After
- 問題/解決策

### 5. コードメインのスライド

```markdown
# 実装例

\`\`\`javascript
function example() {
  return "Hello, World!";
}
\`\`\`

**ポイント**:
- 簡潔な実装
- 読みやすい
```

**特徴**:
- コードブロックを中心に
- 簡潔な説明を添える

---

## タイポグラフィ

### フォントファミリー

```css
font-family: 'Hiragino Sans', 'Noto Sans JP', sans-serif;
```

**推奨フォント**:
- **日本語**: Hiragino Sans、Noto Sans JP
- **欧文**: システムフォント（-apple-system、Segoe UI、Roboto）
- **コード**: Courier New、Monaco、Consolas

### フォントウェイト

| 要素 | ウェイト | 説明 |
|------|---------|------|
| **h1, h2** | `bold` (700) | 見出しは太く |
| **h3** | `normal` (400) | 小見出しは標準 |
| **strong** | `bold` (700) | 強調は太く |
| **body** | `normal` (400) | 本文は標準 |

---

## ベストプラクティス

### 1. 一貫性を保つ

すべてのスライドで同じフォントサイズ、カラー、スペーシングを使用します。

✅ **Good**:
```markdown
# タイトル (48px, #1a202c)
## サブタイトル (36px, #2d3748)
```

❌ **Bad**:
```markdown
# タイトル (50px, #000000)  # サイズと色が異なる
## サブタイトル (32px, #333333)  # サイズと色が異なる
```

### 2. 階層を明確に

フォントサイズとカラーで情報の重要度を明確に示します。

✅ **Good**:
```markdown
# 最も重要 (h1)
## 次に重要 (h2)
### やや重要 (h3)
本文 (p)
```

❌ **Bad**:
```markdown
### タイトル (h3を使用)  # h1を使うべき
# 本文 (h1を使用)  # pを使うべき
```

### 3. 詰め込みすぎない

1スライドに多くの情報を詰め込まないようにします。

✅ **Good**:
- 1スライド = 1メッセージ
- 適切なスペーシング
- 読みやすい分量

❌ **Bad**:
- 1スライドに複数のトピック
- スペーシングが不足
- テキストが多すぎる

### 4. コントラストを確保

テキストと背景のコントラストを十分に確保します。

✅ **Good**:
- 白背景に濃いグレーのテキスト
- コントラスト比 4.5:1以上

❌ **Bad**:
- 白背景に薄いグレーのテキスト
- コントラスト比が低い

### 4.1. コードブロックの配色 ⭐ 重要

ダークな背景（#2d3748）のコードブロックでは、**白を基調とした明るい色**を使用します。

✅ **Good** - はっきり見える配色:
```css
pre {
  background-color: #2d3748;  /* ダークグレー背景 */
  color: #ffffff;  /* 白色テキスト - 最もはっきり見える */
}

pre code {
  color: #ffffff;  /* 白色 - コードブロック内も白 */
}

strong {
  color: #fbbf24;  /* 明るい黄色 - はっきり見える */
}

em {
  color: #a78bfa;  /* 明るい紫 - はっきり見える */
}
```

❌ **Bad** - 見づらい配色:
```css
pre {
  background-color: #2d3748;  /* ダークグレー背景 */
  color: #e2e8f0;  /* 薄いグレー - 見づらい */
}

strong {
  color: #2b6cb0;  /* 暗い青 - 背景に溶け込んで見えない */
}

em {
  color: #805ad5;  /* 暗い紫 - 背景に溶け込んで見えない */
}
```

**ポイント**:
- ダーク背景には白（#ffffff）を基調とする
- 強調色は明るく鮮やかな色を使う（Amber #fbbf24、Light Purple #a78bfa）
- 暗い青や紫は避ける（背景に溶け込んで見えない）

### 5. 絵文字を適度に使用

絵文字は視覚的な魅力を高めますが、使いすぎないようにします。

✅ **Good**:
```markdown
# TypeScript入門 📚
```

❌ **Bad**:
```markdown
# TypeScript入門 📚✨🎓💻🚀
```

---

## チェックリスト

スライドを生成した後、以下をチェックしてください：

- [ ] フォントサイズが階層に従っている（h1:48px, h2:36px, h3:28px, body:24px）
- [ ] カラースキームが統一されている（プライマリ、セカンダリ、アクセント）
- [ ] スペーシングが適切である（マージン、パディング）
- [ ] コントラスト比が十分である（4.5:1以上）
- [ ] レイアウトが一貫している
- [ ] 1スライド1メッセージの原則を守っている
- [ ] テキストが詰め込みすぎていない

---

## 参考資料

- [WCAG 2.1ガイドライン](https://www.w3.org/WAI/WCAG21/quickref/)
- [Material Design Typography](https://material.io/design/typography)
- [Apple Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines/)
- [Contrast Checker](https://webaim.org/resources/contrastchecker/)

---

**注意**: このガイドラインは、プロフェッショナルで読みやすいスライドを作成するための推奨事項です。プロジェクトの要件に応じて、適宜カスタマイズしてください。
