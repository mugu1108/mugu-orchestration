---
name: meta-skill
description: 新しいスキルを対話的に生成します。mugu-orchestrationシステムに新しい自動化ワークフロー、エージェント、コマンドを作成する際に使用してください。
triggers:
  - "新しいスキルを作成"
  - "スキルを生成"
  - "自動化を追加"
  - "新規スキルを作成"
  - "create new skill"
  - "generate skill"
  - "add automation"
  - "make new skill"
---

# メタスキル: スキルジェネレーター

このスキルは、**mugu-orchestration固有**の新しいスキルを作成する手順をガイドします。

## 公式スキルクリエイターとの使い分け

### Claude Code公式スキルクリエイターを使う場合
- **一般的なスキル**: ファイル操作、テキスト処理、汎用的なワークフロー
- **標準的なベストプラクティス**: Claude公式のガイドラインに従いたい
- **メンテナンスの手間を減らしたい**: 公式によるメンテナンスを活用

### meta-skill（このスキル）を使う場合 ⭐
- **mugu-orchestration固有の機能**: Supabase統合、Marp形式スライド生成、時間追跡、請求書生成など
- **プロジェクト特有のワークフロー**: mugu-orchestration専用の自動化
- **Supabaseへの自動登録**: スキルメタデータをSupabaseに自動保存
- **カスタムテンプレート**: プロジェクト固有のテンプレートが必要

## 起動タイミング

以下の場合に**このmeta-skill**を使用してください：

- **Supabase統合スキル**: データベース操作を含むスキル
- **Marp形式スライド生成**: セミナー資料作成の自動化
- **時間追跡と請求書生成**: 業務効率化スキル
- **mugu-orchestration専用ワークフロー**: プロジェクト固有の自動化

一般的なスキルは、Claude Code公式スキルクリエイターを使用してください。

## スキル作成プロセス

### ステップ1: 要件の収集

ユーザーに以下を確認します:
1. **スキル名**: このスキルの名前は？（ケバブケース、例: 'invoice-generator'）
2. **説明**: このスキルが何をするかの1行説明
3. **カテゴリ**: スキルの種類（automation、documentation、analysis、integration、workflow）
4. **トリガー**: このスキルを起動するキーワードやフレーズ
5. **必要なツール**: このスキルで使用するツールは？（Read、Write、Bash、Grepなど）
6. **MCP統合**: MCPサーバーが必要？（Supabase、GitHubなど）
7. **mugu-orchestration固有の要件**:
   - Supabaseスキーマの変更が必要か？
   - Marpテンプレートが必要か？
   - 時間追跡や請求書生成と連携するか？

### ステップ2: テンプレートタイプの選択

カテゴリに基づいて、適切なテンプレートを選択します:

#### A. 基本的な自動化スキル
外部統合なしのシンプルなタスク自動化用。

#### B. エージェント統合スキル
専門化されたエージェントに委譲するスキル用。

#### C. MCP統合スキル
MCPを介して外部サービスと連携するスキル用。

#### D. ワークフローオーケストレーションスキル
複雑な多段階ワークフロー用。

#### E. Supabase統合スキル（mugu-orchestration固有） ⭐
Supabaseを使用したデータ永続化や取得を含むスキル用。

#### F. Marp形式スライド生成スキル（mugu-orchestration固有） ⭐
セミナー資料やプレゼンテーションの自動生成用。

#### G. 業務効率化スキル（mugu-orchestration固有） ⭐
時間追跡、請求書生成など、業務自動化用。

### ステップ3: SKILL.mdの生成

以下の形式でスキルファイルを作成します:

```markdown
---
name: {skill-name}
description: {description}
category: {category}
triggers:
  - "{trigger1}"
  - "{trigger2}"
tools: [{tools}]
mcp_servers: [{mcp_servers}]
---

# {スキルのタイトル}

{説明の段落}

## 起動タイミング

- {ユースケース1}
- {ユースケース2}
- {ユースケース3}

## 前提条件

- {前提条件1}
- {前提条件2}

## ワークフローステップ

### ステップ1: {ステップ名}

{ステップの説明と実装の詳細}

### ステップ2: {ステップ名}

{ステップの説明と実装の詳細}

## 使用例

```
ユーザー: {ユーザーリクエストの例}

エージェント: {レスポンスの例}
```

## 設定

{必要な設定}

## ベストプラクティス

1. {ベストプラクティス1}
2. {ベストプラクティス2}
```

### ステップ4: Supabaseへの登録

`skills`テーブルにスキルのメタデータを挿入します:

```typescript
await supabase.from('skills').insert({
  name: skillName,
  description: description,
  category: category,
  triggers: triggers,
  template_path: `skills/${skillName}/SKILL.md`,
  metadata: { /* 追加のメタデータ */ }
})
```

### ステップ5: サポートファイルの作成

必要に応じて以下を作成します:
- **テンプレート** を `skills/{skill-name}/templates/` に
- **スクリプト** を `scripts/{skill-name}/` に

### ステップ6: ドキュメントの更新

README.mdのSkillsセクションに新しいスキルを追加します

## スキルテンプレート

### テンプレートA: 基本的な自動化スキル

```markdown
---
name: {skill-name}
description: {description}
category: automation
---

# {スキルのタイトル}

## ワークフローステップ

### ステップ1: 入力の検証
### ステップ2: アクションの実行
### ステップ3: 結果のログ記録
### ステップ4: ユーザーへの通知
```

### テンプレートB: MCP統合スキル

```markdown
---
name: {skill-name}
description: {description}
category: integration
mcp_servers:
  - supabase
---

# {スキルのタイトル}

## MCP統合

このスキルは以下のMCPサーバーを使用します:
- **Supabase**: データの永続化と取得

### Supabase操作

1. 既存レコードのクエリ
2. 新しいデータの挿入
3. ステータスの更新
4. 結果の返却
```

### テンプレートC: Supabase統合スキル（mugu-orchestration固有） ⭐

```markdown
---
name: {skill-name}
description: {description}
category: integration
mcp_servers:
  - supabase
triggers:
  - "{trigger1}"
  - "{trigger2}"
---

# {スキルのタイトル}

## 概要
このスキルは、Supabaseを使用してmugu-orchestrationのデータを管理します。

## 前提条件
- Supabaseが設定されている
- 必要なテーブルが存在する
- 環境変数（SUPABASE_URL、SUPABASE_SERVICE_ROLE_KEY）が設定されている

## ワークフローステップ

### ステップ1: データの検証
入力データを検証し、必要なフィールドが存在することを確認

### ステップ2: Supabaseクエリ
mcp__supabase__execute_sql を使用してデータを取得または挿入

### ステップ3: 結果の処理
取得したデータを処理し、ユーザーに返却

### ステップ4: ログ記録
skill_executionsテーブルに実行履歴を記録

## セキュリティ
- RLSポリシーを遵守
- 機密データは環境変数で管理
- SQLインジェクション対策を実施

## 使用例
```
ユーザー: {ユーザーリクエストの例}

エージェント:
1. データを検証します
2. Supabaseから取得します
3. 結果を返します
```
```

### テンプレートD: Marp形式スライド生成スキル（mugu-orchestration固有） ⭐

```markdown
---
name: {skill-name}
description: {description}
category: documentation
triggers:
  - "{trigger1}"
  - "{trigger2}"
---

# {スキルのタイトル}

## 概要
このスキルは、Marp形式のプレゼンテーションスライドを自動生成します。

## 前提条件
- skills/workshop/ のテンプレートが利用可能
- ビジュアル階層ガイドラインを理解している

## ワークフローステップ

### ステップ1: コンテンツの収集
ユーザーからスライドの内容を収集

### ステップ2: アウトラインの作成
スライドの構成を決定

### ステップ3: Marpマークダウンの生成
テンプレートを使用してMarp形式のマークダウンを生成:
- フロントマター（theme、paginate、header、footer）
- タイトルスライド
- コンテンツスライド
- まとめスライド

### ステップ4: ビジュアル階層の適用
- 見出しレベルの統一
- 適切なフォントサイズ
- コントラストの確保

### ステップ5: ファイルの保存
生成したマークダウンを保存

## ベストプラクティス
- ビジュアル階層リファレンスに準拠
- 絵文字使用ガイドに従う
- テンプレートの一貫性を維持

## 使用例
```
ユーザー: TypeScript入門のワークショップ資料を作成してください

エージェント:
1. コンテンツの収集
   - 対象者: 初心者
   - 時間: 2時間
   - トピック: TypeScript基礎

2. アウトラインの作成
   - タイトル: TypeScript入門
   - セクション1: TypeScriptとは
   - セクション2: 基本文法
   - セクション3: ハンズオン

3. Marpマークダウンの生成
   [Marp形式のスライドを生成...]
```
```

### テンプレートE: 業務効率化スキル（mugu-orchestration固有） ⭐

```markdown
---
name: {skill-name}
description: {description}
category: automation
mcp_servers:
  - supabase
triggers:
  - "{trigger1}"
  - "{trigger2}"
---

# {スキルのタイトル}

## 概要
このスキルは、mugu-orchestrationの業務効率化機能を提供します。

## 前提条件
- Supabaseに必要なテーブルが設定されている
- 環境変数が設定されている

## ワークフローステップ

### ステップ1: データの収集
業務データをSupabaseから取得

### ステップ2: データの処理
集計、フォーマット、計算など

### ステップ3: 結果の出力
レポート、請求書、通知などを生成

### ステップ4: ログ記録
実行履歴をSupabaseに記録

## 統合
- **時間追跡**: time_entriesテーブルと連携
- **請求書生成**: 時間データから請求書を自動生成
- **通知**: Slack/Discord通知と連携（将来的に）

## 使用例
```
ユーザー: 先月の作業時間をまとめてください

エージェント:
1. time_entriesテーブルから先月のデータを取得
2. プロジェクト別に集計
3. レポートを生成
4. 実行履歴を記録
```
```

## スキル作成のベストプラクティス

### 一般的なベストプラクティス
1. **明確な命名**: ケバブケースで、説明的な名前を使用
2. **単一責任**: 各スキルは1つのことをうまくやる
3. **組み合わせ可能性**: スキルは他のスキルと組み合わせ可能であるべき
4. **エラー処理**: 常にエラーシナリオを含める
5. **ドキュメント化**: 包括的な例とユースケース
6. **ロギング**: 分析のためにSupabaseに実行をログ記録

### 公式スキルクリエイターとの使い分け 🔄

#### このmeta-skillを使うべき場合 ⭐
- Supabase統合が必要な場合
- Marp形式のスライドを生成する場合
- mugu-orchestration固有のワークフロー（時間追跡、請求書生成など）
- プロジェクト固有のテンプレートやデータ構造を使用する場合
- Supabaseへのスキルメタデータ登録が必要な場合

#### 公式スキルクリエイターを使うべき場合
- 一般的なファイル操作（読み込み、書き込み、検索など）
- 汎用的なテキスト処理
- 標準的なワークフロー自動化
- プロジェクト固有の機能が不要な場合

#### 迷ったら？
**一般的なスキル** → 公式スキルクリエイター
**mugu-orchestration固有** → このmeta-skill

## 成功指標

スキル作成後、以下を確認します:
- [ ] 有効なフロントマターを持つSKILL.mdファイルが存在する
- [ ] 説明が明確で簡潔である
- [ ] トリガーが具体的で曖昧でない
- [ ] ワークフローステップが詳細に記載されている
- [ ] 使用例が提供されている
- [ ] Supabaseの`skills`テーブルにスキルが登録されている
- [ ] ドキュメントが更新されている

---

**注意**: 優れたスキルは、自己文書化され、組み合わせ可能で、エラーを適切に処理します。
