---
name: meta-skill
description: 新しいスキルを対話的に生成します。mugu-orchestrationシステムに新しい自動化ワークフロー、エージェント、コマンドを作成する際に使用してください。
triggers:
  - "新しいスキルを作成"
  - "スキルを生成"
  - "自動化を追加"
  - "新規スキルを作成"
  - "create new skill"
  - "generate skill"
  - "add automation"
  - "make new skill"
---

# メタスキル: スキルジェネレーター

このスキルは、mugu-orchestrationシステムに新しいスキルを作成する手順をガイドします。

## 起動タイミング

- 新しい自動化ワークフローを作成するとき
- 新しいビジネスロジックを追加するとき
- 新しいエージェント機能を定義するとき
- 再利用可能なコマンドパターンを構築するとき

## スキル作成プロセス

### ステップ1: 要件の収集

ユーザーに以下を確認します:
1. **スキル名**: このスキルの名前は？（ケバブケース、例: 'invoice-generator'）
2. **説明**: このスキルが何をするかの1行説明
3. **カテゴリ**: スキルの種類（automation、documentation、analysis、integration、workflow）
4. **トリガー**: このスキルを起動するキーワードやフレーズ
5. **必要なツール**: このスキルで使用するツールは？（Read、Write、Bash、Grepなど）
6. **MCP統合**: MCPサーバーが必要？（Supabase、GitHubなど）

### ステップ2: テンプレートタイプの選択

カテゴリに基づいて、適切なテンプレートを選択します:

#### A. 基本的な自動化スキル
外部統合なしのシンプルなタスク自動化用。

#### B. エージェント統合スキル
専門化されたエージェントに委譲するスキル用。

#### C. MCP統合スキル
MCPを介して外部サービスと連携するスキル用。

#### D. ワークフローオーケストレーションスキル
複雑な多段階ワークフロー用。

### ステップ3: SKILL.mdの生成

以下の形式でスキルファイルを作成します:

```markdown
---
name: {skill-name}
description: {description}
category: {category}
triggers:
  - "{trigger1}"
  - "{trigger2}"
tools: [{tools}]
mcp_servers: [{mcp_servers}]
---

# {スキルのタイトル}

{説明の段落}

## 起動タイミング

- {ユースケース1}
- {ユースケース2}
- {ユースケース3}

## 前提条件

- {前提条件1}
- {前提条件2}

## ワークフローステップ

### ステップ1: {ステップ名}

{ステップの説明と実装の詳細}

### ステップ2: {ステップ名}

{ステップの説明と実装の詳細}

## 使用例

```
ユーザー: {ユーザーリクエストの例}

エージェント: {レスポンスの例}
```

## 設定

{必要な設定}

## ベストプラクティス

1. {ベストプラクティス1}
2. {ベストプラクティス2}
```

### ステップ4: Supabaseへの登録

`skills`テーブルにスキルのメタデータを挿入します:

```typescript
await supabase.from('skills').insert({
  name: skillName,
  description: description,
  category: category,
  triggers: triggers,
  template_path: `skills/${skillName}/SKILL.md`,
  metadata: { /* 追加のメタデータ */ }
})
```

### ステップ5: サポートファイルの作成

必要に応じて以下を作成します:
- **テンプレート** を `skills/{skill-name}/templates/` に
- **スクリプト** を `scripts/{skill-name}/` に

### ステップ6: ドキュメントの更新

README.mdのSkillsセクションに新しいスキルを追加します

## スキルテンプレート

### テンプレートA: 基本的な自動化スキル

```markdown
---
name: {skill-name}
description: {description}
category: automation
---

# {スキルのタイトル}

## ワークフローステップ

### ステップ1: 入力の検証
### ステップ2: アクションの実行
### ステップ3: 結果のログ記録
### ステップ4: ユーザーへの通知
```

### テンプレートB: MCP統合スキル

```markdown
---
name: {skill-name}
description: {description}
category: integration
mcp_servers:
  - supabase
---

# {スキルのタイトル}

## MCP統合

このスキルは以下のMCPサーバーを使用します:
- **Supabase**: データの永続化と取得

### Supabase操作

1. 既存レコードのクエリ
2. 新しいデータの挿入
3. ステータスの更新
4. 結果の返却
```

## スキル作成のベストプラクティス

1. **明確な命名**: ケバブケースで、説明的な名前を使用
2. **単一責任**: 各スキルは1つのことをうまくやる
3. **組み合わせ可能性**: スキルは他のスキルと組み合わせ可能であるべき
4. **エラー処理**: 常にエラーシナリオを含める
5. **ドキュメント化**: 包括的な例とユースケース
6. **ロギング**: 分析のためにSupabaseに実行をログ記録

## 成功指標

スキル作成後、以下を確認します:
- [ ] 有効なフロントマターを持つSKILL.mdファイルが存在する
- [ ] 説明が明確で簡潔である
- [ ] トリガーが具体的で曖昧でない
- [ ] ワークフローステップが詳細に記載されている
- [ ] 使用例が提供されている
- [ ] Supabaseの`skills`テーブルにスキルが登録されている
- [ ] ドキュメントが更新されている

---

**注意**: 優れたスキルは、自己文書化され、組み合わせ可能で、エラーを適切に処理します。
