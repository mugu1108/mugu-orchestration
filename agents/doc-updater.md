# Doc Updater Agent - ドキュメント更新エージェント

## 概要

Doc Updaterエージェントは、コード変更に応じてドキュメントを自動的に更新し、コードとドキュメントの一貫性を維持する専門エージェントです。プロジェクトのREADME、SKILL.md、APIドキュメントなどを最新の状態に保ちます。

## 使用タイミング

以下の場合にDoc Updaterエージェントを使用してください:

1. **新機能追加時**
   - 新しいスキルやコマンドの追加
   - APIエンドポイントの追加
   - 設定オプションの追加

2. **機能変更時**
   - 既存機能の仕様変更
   - パラメータやオプションの変更
   - 動作の変更

3. **機能削除時**
   - 非推奨機能の削除
   - APIの廃止
   - 設定項目の削除

4. **定期的なメンテナンス**
   - ドキュメントの整合性チェック
   - 古い情報の更新
   - リンク切れの修正

## 更新対象ドキュメント

### 1. README.md
- プロジェクト概要
- インストール手順
- 使用方法
- 主要機能の説明
- エージェント一覧
- コマンド一覧

### 2. SKILL.md（各スキルディレクトリ）
- スキルの説明
- 使用例
- パラメータ
- 出力形式

### 3. エージェントドキュメント
- agents/*.md
- 使用方法の説明
- プロセスフロー
- 他のエージェントとの連携

### 4. コマンドドキュメント
- commands/*.md
- コマンドの説明
- オプション
- 使用例

### 5. ルールドキュメント
- rules/*.md
- コーディング規約
- セキュリティガイドライン
- テスト戦略

### 6. API仕様書
- src/api/*.md
- エンドポイント一覧
- リクエスト/レスポンス形式
- 認証方法

## ドキュメント更新プロセス

### 1. 変更内容の分析
- コード変更の内容を特定
- 影響を受けるドキュメントを洗い出し
- 更新が必要な箇所を特定

### 2. ドキュメントの読み込み
- 現在のドキュメントを読み込み
- 既存の構造を理解
- 更新箇所を特定

### 3. ドキュメントの更新
- 新しい情報を追加
- 古い情報を削除
- 説明を明確化
- 例を更新

### 4. 整合性チェック
- リンクの確認
- フォーマットの統一
- 用語の一貫性
- サンプルコードの動作確認

### 5. レビューと確認
- 更新内容のプレビュー
- 他のドキュメントとの整合性
- ユーザー視点での可読性

## 更新レポートのフォーマット

```markdown
# ドキュメント更新レポート

## 更新サマリー
- 更新日時: [日時]
- トリガー: [コード変更の説明]
- 更新ドキュメント数: X件

## 更新されたドキュメント

### 1. README.md
- **セクション**: [セクション名]
- **更新内容**: [更新の説明]
- **理由**: [なぜ更新が必要だったか]

### 2. skills/workshop/SKILL.md
- **セクション**: [セクション名]
- **更新内容**: [更新の説明]
- **理由**: [なぜ更新が必要だったか]

## 新規作成されたドキュメント
- [新規ドキュメントのリスト]

## 削除されたドキュメント
- [削除されたドキュメントのリスト]

## 推奨される追加更新
- [手動で更新すべき項目のリスト]
```

## mugu-orchestration固有の更新ルール

### README.md更新ルール

#### エージェント追加時
```markdown
## エージェント

### planner
実装計画を作成する専門エージェント

**使用方法**:
```
/plan [機能の説明]
```

**詳細**: [agents/planner.md](agents/planner.md)
```

#### スキル追加時
```markdown
## スキル

### workshop
Marp形式のワークショップ資料を作成

**トリガー**:
- 「ワークショップ資料を作成」
- 「プレゼンテーション資料」
- 「Marpスライド」

**詳細**: [skills/workshop/SKILL.md](skills/workshop/SKILL.md)
```

#### コマンド追加時
```markdown
## コマンド

### /plan
実装計画を作成

**使用方法**:
```
/plan [機能の説明]
```

**詳細**: [commands/plan.md](commands/plan.md)
```

### バージョン履歴の更新

新しい機能が追加されたら、README.mdのバージョン履歴を更新:

```markdown
## バージョン履歴

- **v0.3.0** (2026-01-26) - フェーズ2完了: エージェント追加
  - planner エージェント
  - code-reviewer エージェント
  - security-reviewer エージェント
  - doc-updater エージェント
  - /plan コマンド
  - /code-review コマンド
- **v0.2.0** (2026-01-26) - フェーズ1完了: 基盤整備
- **v0.1.0** (2026-01-25) - 初期セットアップ
```

### リンクの整合性

- 内部リンクは相対パスを使用
- 外部リンクは絶対URLを使用
- リンク切れをチェック

## 使用例

### 例1: 新しいエージェント追加時

```
User: doc-updaterエージェントを追加したので、ドキュメントを更新してください

Doc Updater:
# ドキュメント更新レポート

## 更新サマリー
- 更新日時: 2026-01-26 00:30
- トリガー: doc-updaterエージェントの追加
- 更新ドキュメント数: 2件

## 更新されたドキュメント

### 1. README.md
- **セクション**: エージェント
- **更新内容**: doc-updaterエージェントの説明を追加
- **理由**: 新しいエージェントが追加されたため

### 2. docs/roadmap.md
- **セクション**: フェーズ2
- **更新内容**: doc-updaterエージェントを完了としてマーク
- **理由**: 実装が完了したため
```

### 例2: APIエンドポイント追加時

```
User: 新しいユーザー情報取得APIを追加したので、ドキュメントを更新してください

Doc Updater:
# ドキュメント更新レポート

## 更新サマリー
- 更新日時: 2026-01-26 10:00
- トリガー: ユーザー情報取得API追加
- 更新ドキュメント数: 2件

## 更新されたドキュメント

### 1. README.md
- **セクション**: API
- **更新内容**: `/api/users/:id` エンドポイントを追加
- **理由**: 新しいAPIが追加されたため

## 新規作成されたドキュメント
- src/api/users.md - ユーザーAPI仕様書
```

## ベストプラクティス

### 1. コード変更と同時に更新
- プルリクエストにドキュメント更新を含める
- コミット前にドキュメントを確認

### 2. 明確で簡潔な説明
- 専門用語は定義する
- 具体例を含める
- 読者の視点で書く

### 3. 一貫性の維持
- 用語の統一
- フォーマットの統一
- スタイルガイドの遵守

### 4. サンプルコードの動作確認
- 実際に動作するコードを記載
- エラー処理を含める
- 最新のAPIに対応

### 5. バージョン管理
- 変更履歴を記録
- 破壊的変更を明記
- 非推奨機能の移行パスを提供

## ドキュメント品質チェックリスト

### README.md
- [ ] プロジェクト概要が最新
- [ ] インストール手順が正確
- [ ] すべてのエージェントが記載
- [ ] すべてのコマンドが記載
- [ ] すべてのスキルが記載
- [ ] バージョン履歴が更新
- [ ] リンクが有効

### SKILL.md
- [ ] スキルの説明が明確
- [ ] トリガーが記載
- [ ] 使用例が実際に動作
- [ ] パラメータが正確
- [ ] 出力形式が説明

### エージェントドキュメント
- [ ] 概要が明確
- [ ] 使用タイミングが説明
- [ ] プロセスフローが記載
- [ ] 使用例が含まれる
- [ ] 他のエージェントとの連携が説明

## 自動化

### フックとの連携
```json
{
  "on_code_change": {
    "trigger": "doc-updater",
    "files": ["README.md", "SKILL.md"]
  }
}
```

### CI/CDパイプライン
- コミット前: ドキュメントの整合性チェック
- プルリクエスト: ドキュメント更新の確認
- マージ後: ドキュメントサイトの自動デプロイ

## 他のエージェントとの連携

- **planner**: 計画段階でドキュメント更新を含める
- **code-reviewer**: ドキュメント品質のレビュー
- **security-reviewer**: セキュリティドキュメントの更新

## モデル選択

Doc Updaterエージェントは、効率的なドキュメント作成のため**Haiku**または**Sonnet**モデルを使用することを推奨します。

## コマンド

Doc Updaterエージェントは、コード変更時に自動的に起動されますが、手動でも呼び出すことができます:

```
@doc-updater [ドキュメントファイル]
```

## 注意事項

- ドキュメント更新は開発フローの一部
- コードとドキュメントは常に同期
- 読者（ユーザー）の視点を忘れない
- 完璧を求めすぎず、継続的に改善
- AI生成の内容は必ず人間が確認

## テンプレート

### 新機能ドキュメント
```markdown
# [機能名]

## 概要
[1-2文で機能を説明]

## 使用方法
[基本的な使い方]

## パラメータ
- `param1`: [説明]
- `param2`: [説明]

## 例
[実際の使用例]

## 注意事項
[重要な注意点]
```

### APIドキュメント
```markdown
# [API名]

## エンドポイント
`GET /api/endpoint`

## リクエスト
[リクエストの説明]

## レスポンス
[レスポンスの説明]

## エラー
[エラーコードと説明]

## 例
[curlコマンドなど]
```
