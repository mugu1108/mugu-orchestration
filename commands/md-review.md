# /md-review - MDファイル品質チェックコマンド

**説明**: プロジェクト内のMDファイルをベストプラクティスに照合し、改善提案またはリライトを行います。

## 使用方法

```
/md-review <ファイルパス>
/md-review <ファイルパス> --fix
/md-review --all
```

## 概要

`/md-review` コマンドは、MDファイルの種類（rule / skill / agent / command）を自動判定し、該当テンプレートと照合してギャップ分析を実行します。公式ベストプラクティスに基づくチェックリストで品質を評価し、具体的な改善提案を出力します。

## いつ使うか

- **新規MDファイル作成後**: テンプレート準拠の品質確認
- **既存MDファイルのメンテナンス**: 定期的な品質チェック
- **PR前**: ドキュメント品質のゲートとして
- **パターンの統一**: プロジェクト全体のMD品質を揃えたいとき

## 使用例

### 例1: 単一ファイルのレビュー

```
/md-review .claude/rules/typescript.md
```

**出力**:
```markdown
# MDレビュー結果: typescript.md

**種類**: rule
**行数**: 12行
**総合評価**: A

## 必須セクション
- [x] H1タイトル ... OK
- [x] 箇条書きルール ... OK

## チェック結果
- [x] フロントマターの形式が正しい（paths指定あり）
- [x] 500行以下
- [x] 自明なルールなし
- [x] 指示が具体的で行動可能
- [ ] 他ファイルとの重複チェック ... 1件検出

## 改善提案
1. **[Low]** `rules/coding-style.md` と「命名規則はキャメルケース」が重複。一方を参照に変更を推奨。

## 総評
全体的に簡潔で品質良好。重複1件の解消で完璧。
```

### 例2: エージェントファイルの自動リライト

```
/md-review agents/development/planner.md --fix
```

**出力**:
```markdown
# MDレビュー結果: planner.md

**種類**: agent
**行数**: 145行
**総合評価**: B

## 必須セクション
- [x] H1タイトル ... OK
- [x] 概要 ... OK
- [x] ワークフロー ... OK
- [x] 使用例 ... OK
- [ ] モデル選択 ... 欠落

## 改善提案
1. **[Medium]** `## モデル選択` セクションが欠落。推奨モデルと理由を追加。
2. **[Low]** 概要が5文あり冗長。2〜3文に圧縮可能。

## リライト案
（改善後の全文をここに出力）
```

### 例3: 全ファイルスキャン

```
/md-review --all
```

**出力**:
```markdown
# MD品質スキャン結果

**スキャン日時**: 2026-02-27
**対象ファイル数**: 18件

## サマリー

| 評価 | ファイル数 |
|------|-----------|
| A（問題なし） | 12 |
| B（軽微な改善） | 4 |
| C（要改善） | 2 |

## 要改善ファイル

### agents/development/doc-updater.md (評価: C)
- 必須セクション「使用例」が欠落
- 概要が8文で冗長

### commands/slide.md (評価: C)
- 使用例の出力が未記載
- フロントマターが誤って含まれている

## 次のアクション
1. 評価Cの2ファイルを `/md-review <パス> --fix` でリライト
2. 評価Bの4ファイルは軽微な修正のみ
```

## オプション

| オプション | 説明 |
|-----------|------|
| `--fix` | 改善提案に加えてリライト案を自動生成 |
| `--all` | プロジェクト内の全MDファイルをスキャン |

## ベストプラクティス

1. **新規作成後に即レビュー**: 書いた直後が最も効率的
2. **`--fix` は差分確認してから適用**: 自動リライトは必ず目視確認
3. **定期的な `--all` スキャン**: 月1回程度でプロジェクト全体の品質維持
4. **指摘が多い場合はテンプレートから再作成**: 部分修正より効率的

## 関連エージェント

- **doc-updater**: ドキュメント更新エージェント（`agents/development/doc-updater.md`）

## モデル選択

通常のレビューにはコスト効率の良い **Sonnet** を推奨。大規模リライトや複雑な構造改善には **Opus** を使用。

## 詳細情報

- スキル定義: [skills/md-review/SKILL.md](../skills/md-review/SKILL.md)
- テンプレート: [skills/md-review/templates/](../skills/md-review/templates/)

## 注意事項

- テンプレートはガイドライン。プロジェクト固有の事情で逸脱が必要な場合はその旨を明記する
- `CLAUDE.md` や `MEMORY.md` など特殊ファイルはレビュー対象外
- `--fix` のリライト案は提案であり、適用前に必ず確認する
